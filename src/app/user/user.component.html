<div *ngIf="!avatar"
  class="avatar">
  <md-spinner></md-spinner>
</div>
<img *ngIf="avatar"
  class="avatar"
  src="data:image/{{avatar.format}};base64,{{avatar.base64}}"
  alt="Profile Picture of {{username}}">
<span>{{user.gender}}</span>
<span>{{user.age}}</span>
<span style="font-weight:bold;">{{user.givenName}} {{user.familyName}}</span>
<span>@{{username}}</span>
<a *ngIf="isMe === true" routerLink="/user/{{username}}/edit">Edit Profile</a>
<a *ngIf="isMe === false" routerLink="/messages/{{username}}">Messages</a>


<!-- contact link  -->
<span *ngIf="isMe === false">

  <!-- loading -->
  <span *ngIf="contactStatus === null">Fetching contact info...</span>

  <a *ngIf="contactStatus !== null" routerLink="/contact-with/{{username}}">
    <!-- nonexistent -->
    <span *ngIf="contactStatus === 'nonexistent'">Send a contact request</span>
    <!-- confirmed -->
    <span *ngIf="contactStatus === 'confirmed'">Update contact</span>
    <!-- unconfirmed, sent -->
    <span *ngIf="contactStatus === 'sent'">Update contact request</span>
    <!-- unconfirmed, received -->
    <span *ngIf="contactStatus === 'received'">Accept or Decline contact request</span>
  </a>
</span>

<nav md-tab-nav-bar>
  <a md-tab-link
    routerLink="/user/{{username}}"
    routerLinkActive #profileLink="routerLinkActive"
    [active]="profileLink.isActive">
    Profile
  </a>

  <a md-tab-link
    routerLink="/user/{{username}}/contacts"
    routerLinkActive #contactsLink="routerLinkActive"
    [active]="contactsLink.isActive">
    Contacts
  </a>
</nav>

<router-outlet></router-outlet>
